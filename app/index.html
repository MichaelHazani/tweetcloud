<!DOCTYPE html>
<html>
<head>
<!-- <meta charset="utf-8">
<meta property="og:site_name" content="Affected">
<meta property="og:title" content="A webAudio visualization exercise by Michael Hazani">
<meta property="og:description" content="live audio / soundfile playback, effects and visualization">
<meta property="og:image" content="images/affected.png">
<meta property="og:url" content="affected.michaelhazani.net">
<meta property="og:type" content="art"> -->
<title>TweetCloud</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="javascript/jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script src="javascript/three.min.js"></script>
<script src="libs/OrbitControls.js"></script>
<script src="javascript/main.js"></script>

</head>
<body>
<form id="sendWord">
Enter Keyword<br><input type="text" id="enterWord"><br>
<button id="startTweet" style="text-align: center;">Begin Stream</button>
</form>
<div id="otherButtons">
<button id="stopTweet">Stop Stream</button>
<button id="empty">Erase Tweets</button>
</div>

<div id="three"></div>
<div id="tweetStream"></div>
<!-- <canvas id = "myCanvas" width="256" height="256"></canvas> -->




<script>
'use strict';
$(function(){
var chosenWord;
var socket = io.connect('http://localhost:8081/');
var numTweets = 0;

$("#enterWord").focus();

$("#sendWord").submit(function(e){
  e.preventDefault();
  chosenWord = $("#enterWord").val();
  // console.log(chosenWord);
  socket.emit("start tweets", chosenWord);
  });


$("#stopTweet").click(function(){
    socket.emit('stop');
});

$("#empty").click(function(){
    console.log("hi");
    $("#tweetStream").empty();
});

  socket.on('twitter-stream', function(data){

  //$("#tweetStream").append(data);
  // console.log(data);
var myCanvas = document.createElement('canvas');
var ctx = myCanvas.getContext('2d');
//ctx.clearRect(0,0,myCanvas.width,myCanvas.height);

ctx.font = "30px courier new";
ctx.fillStyle= "rgb(" +
Math.floor(Math.random()*256) + "," +
Math.floor(Math.random()*256) + "," +
Math.floor(Math.random()*256) + ")";
var text = data;
//ctx.font = "courier new";
// ctx.rect(0,0,256,256);
// ctx.fillStyle="black";
// ctx.fill();
// ctx.fillStyle="pink";
ctx.fillText(text, 30, 128);

ctx.textAlign = "center";
var canText1 = new THREE.Texture(myCanvas);
canText1.needsUpdate = true;

//test plane
var geometry = new THREE.PlaneGeometry(myCanvas.width, myCanvas.height);

// try canvas
var canMat = new THREE.MeshBasicMaterial( {map:canText1, side:THREE.DoubleSide});
canMat.transparent = true;


// Make plane
var max = 400;
var min = -400;

var twitterPlane = new THREE.Mesh(geometry, canMat);
twitterPlane.position.set(Math.floor(Math.random()*(max - min) + min),
                       Math.floor(Math.random()*(max - min) + min),
                       Math.floor(Math.random()*(max - min) + min));
twitterPlane.rotation.set(Math.floor(Math.random()*(max - min) + min),
                       Math.floor(Math.random()*(max - min) + min),
                       Math.floor(Math.random()*(max - min) + min));
scene.add(twitterPlane);
  //Do some threejs stuff here!
  });



});
</script>
</body>
</html>
